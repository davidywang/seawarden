#54 bath
bath <- raster(paste0(tif_output, 54, "_bath.tif"))
bath_2<-projectRaster(bath, crs = crs(bath), res = res(bath)/23)
#writeRaster(bath_2, file = "test.tif", "GTiff", overwrite=TRUE)
matrix <-raster2matrix(bath_2)
matrix <-round(matrix, 0)
matrix <- matrix[58:457,1:400]
matrix[matrix > 0] <- 0 #remove postive values
matrix[is.na(matrix)] <- 0 #fill empty values
output <- paste0(txt_output, targets$farm_id[i], '_bath.txt')
write.table(matrix, file=output, sep = " ", row.names=FALSE, col.names=FALSE)
dim(matrix)
#54 bath
bath <- raster(paste0(tif_output, 54, "_bath.tif"))
bath_2<-projectRaster(bath, crs = crs(bath), res = res(bath)/23)
#writeRaster(bath_2, file = "test.tif", "GTiff", overwrite=TRUE)
matrix <-raster2matrix(bath_2)
matrix <-round(matrix, 0)
matrix <- matrix[58:457,1:400]
matrix[matrix > 0] <- 0 #remove postive values
matrix[is.na(matrix)] <- 0 #fill empty values
output <- paste0(txt_output, 54, '_bath.txt')
write.table(matrix, file=output, sep = " ", row.names=FALSE, col.names=FALSE)
dim(matrix)
library(dplyr)
#create one csv per farm site
farmsites <- read.csv('../r_rac/master_inventory - Farm_Sites.csv', header=TRUE, sep=",")
sites <- farmsites$farm_site
#sites <-117
sites <-54
rac_folder <- '../r_rac/rac_seabass/'
site_folder <- '/Bass_population/Outputs/Out_csv/'
rac_folder_2 <- '../r_rac/rac_bream/'
site_folder_2 <- '/Bream_population/Outputs/Out_csv/'
#function to convert RAC predictions to C, N, P
waste_compiler <- function(rac_folder, site_folder, i){
compiled <- read.csv(paste0(rac_folder, 'output_compiled/site_', i, '_compiled.csv'), header=TRUE, sep=",")
Pexc <- compiled$faeces_p*.4 + compiled$faeces_l*2.3 + compiled$faeces_c*0
Nexc <- compiled$faeces_p*15.9 + compiled$faeces_l*2.6 + compiled$faeces_c*0
Cexc <- compiled$faeces_p*54.5 + compiled$faeces_l*77 + compiled$faeces_c*40
Pwst <- compiled$feed_p*.4 + compiled$feed_l*2.3 + compiled$feed_c*0
Nwst <- compiled$feed_p*15.9 + compiled$feed_l*2.6 + compiled$feed_c*0
Cwst <- compiled$feed_p*54.5 + compiled$feed_l*77 + compiled$feed_c*40
compiled <- data.frame(cbind(compiled$day, Pexc, Nexc, Cexc, Pwst, Nwst, Cwst))
#colnames(compiled) <- c("Day", "Pexc (g)", "Nexc (g)", "Cexc (g)", "Pwst (g)", "Nwst (g)", "Cwst (g)")
harvest <-  read.csv(paste0(rac_folder, 'site_', i, site_folder, 'Days_to_commercial_size.csv'))
harvest <- harvest %>% select(3)
harvest <- harvest[[1]]
compiled <- compiled[1:harvest,]
name <- paste0(rac_folder, 'output_waste/', i, '_total_waste.csv')
write.table(compiled, file = name, row.names=FALSE, col.names = TRUE, sep=",")}
#prepare total waste conversions for all sites
for (i in sites){
waste_compiler(rac_folder, site_folder, i)
waste_compiler(rac_folder_2, site_folder_2, i)}
#generate txt files specific to net pens of a farm site
folder <- "../r_ficim/"
site_id = sites
site <- read.csv(paste0(folder, 'FiCIM - ', site_id, '.csv'), header=TRUE, sep=",", stringsAsFactors = FALSE)
#index <- nrow(site) - 1 #remove last row
#load param template
param <- read.csv(paste0(folder, 'FiCIM - Param.csv'), header=FALSE, sep=",", stringsAsFactors = FALSE)
#load date template
date <- read.csv(paste0(folder, 'FiCIM - Julian_Day.csv'), header=FALSE, sep=",", stringsAsFactors = FALSE)
hr <- read.csv(paste0(folder, 'FiCIM - Julian_Hr.csv'), header=FALSE, sep=",", stringsAsFactors = FALSE)
#load bath and current data
bath <- "../data_bath/bath_txt/"
current <- "../data_current/current_txt/"
#copy bath and current data
file.copy(paste0(bath, site_id, "_bath.txt"), folder, overwrite = TRUE) #xport bath
#file.copy(paste0(current, site_id, "_current.txt"), folder, overwrite = TRUE) #export current
#add date to current data
c <- read.delim(paste0(current, site_id, "_current.txt"), header = FALSE, sep = "\t")
h <- rep(hr, nrow(c)/24)
d <- rep(date$V4, each = 24) + unlist(h)
c <- cbind(d, c)
c <- c %>% rename("Julian Hour" = d, "u (m/s)" = V1, "v (m/s)" = V2)
name <- paste0(folder, site_id, '_current.txt')
write.table(c, name, sep = "\t", row.names=FALSE, col.names=TRUE, quote = FALSE)
#generate txt files
index = 1
for (i in 1:index){
#load total_waste.csv
name <- paste0("/Users/Zack/0_seawarden/r_rac/rac_", site$Species[i], '/output_waste/', site$farm_id[i], '_total_waste.csv')
waste <- read.csv(name, header=TRUE, sep=",", stringsAsFactors = FALSE)
#param.txt
param$V1[2] <- nrow(waste) #days
param$V2[2] <- site$Species.Index[i] #species
param$V3[2] <- site$ORIG_FID[i] #cage number
param$V4[2] <- site$Cgx[i] #cage position
param$V5[2] <- site$Cgy[i] #cage position
param$V1[6] <- 0 #0 = no bath
param$V2[6] <- -20 #depth (meters)
#reduce total waste to net pen
#date %>% rename("Day" = V1) ?
waste <- waste[2:7] * as.numeric(site$Percentage[i]) #reduce waste total to net pen size
waste <- round(waste, 5)
waste <- cbind(date$V4[1:nrow(waste)], waste) #add julian date, combine with waste
names(waste)[1] <- "Day"
#export param.txt
name <- paste0(folder, site$farm_id[i], '_', site$ORIG_FID[i], '_param_', site$Species[i], '.txt')
write.table(param, name, sep = "\t", row.names=FALSE, col.names=FALSE, quote = FALSE)
#export total_waste.txt
name <- paste0(folder, site$farm_id[i], '_', site$ORIG_FID[i], '_total_waste_', site$Species[i], '.txt')
write.table(waste, sep = "        ", name, row.names=FALSE, col.names=TRUE, quote = FALSE)}
#generate txt files
index = 1
for (i in 1:index){
#load total_waste.csv
name <- paste0("/Users/Zack/0_seawarden/r_rac/rac_", site$Species[i], '/output_waste/', site$farm_id[i], '_total_waste.csv')
waste <- read.csv(name, header=TRUE, sep=",", stringsAsFactors = FALSE)
#param.txt
param$V1[2] <- nrow(waste) #days
param$V2[2] <- site$Species.Index[i] #species
param$V3[2] <- site$ORIG_FID[i] #cage number
param$V4[2] <- site$Cgx[i] #cage position
param$V5[2] <- site$Cgy[i] #cage position
param$V1[6] <- 1 #0 = no bath
#param$V2[6] <- -20 #depth (meters)
#reduce total waste to net pen
#date %>% rename("Day" = V1) ?
waste <- waste[2:7] * as.numeric(site$Percentage[i]) #reduce waste total to net pen size
waste <- round(waste, 5)
waste <- cbind(date$V4[1:nrow(waste)], waste) #add julian date, combine with waste
names(waste)[1] <- "Day"
#export param.txt
name <- paste0(folder, site$farm_id[i], '_', site$ORIG_FID[i], '_param_', site$Species[i], '.txt')
write.table(param, name, sep = "\t", row.names=FALSE, col.names=FALSE, quote = FALSE)
#export total_waste.txt
name <- paste0(folder, site$farm_id[i], '_', site$ORIG_FID[i], '_total_waste_', site$Species[i], '.txt')
write.table(waste, sep = "        ", name, row.names=FALSE, col.names=TRUE, quote = FALSE)}
dim(matrix)
dim <- dim(matrix)
dim[1]
dim[2]
#resample raster from 115m to 5m (FiCIM) and export as txt file
#https://datacarpentry.org/r-raster-vector-geospatial/03-raster-reproject-in-r/
bath_txt <- function(tif_output, i, txt_output){
bath <- raster(paste0(tif_output, targets$farm_id[i], "_bath.tif"))
bath_2<-projectRaster(bath, crs = crs(bath), res = res(bath)/23)
#writeRaster(s, file = "test.tif", "GTiff", overwrite=TRUE)
matrix <-raster2matrix(bath_2)
matrix <- round(matrix, 0)
dim <- dim(matrix) #automatic matrix triming needs to be added
matrix <- matrix[58:457,1:400] #select center of matrix 400x400
matrix[matrix > 0] <- 0 #remove postive values
matrix[is.na(matrix)] <- 0 #fill empty values
#matrix <-matrix(-20.5, nrow = 400, ncol = 400) #temporary
output <- paste0(txt_output, targets$farm_id[i], '_bath.txt')
write.table(matrix, file=output, sep = " ", row.names=FALSE, col.names=FALSE)}
# for (i in 1:nrow(as.data.frame(targets))){
#   bath_txt(tif_output, i, txt_output)}
bath_txt(tif_output, 54, txt_output)
targets$farm_id[i]
#resample raster from 115m to 5m (FiCIM) and export as txt file
#https://datacarpentry.org/r-raster-vector-geospatial/03-raster-reproject-in-r/
bath_txt <- function(tif_output, i, txt_output){
bath <- raster(paste0(tif_output, targets$farm_id[i], "_bath.tif"))
bath_2<-projectRaster(bath, crs = crs(bath), res = res(bath)/23)
#writeRaster(s, file = "test.tif", "GTiff", overwrite=TRUE)
matrix <-raster2matrix(bath_2)
matrix <- round(matrix, 0)
dim <- dim(matrix) #automatic matrix triming needs to be added
matrix <- matrix[58:457,1:400] #select center of matrix 400x400
matrix[matrix > 0] <- 0 #remove postive values
matrix[is.na(matrix)] <- 0 #fill empty values
#matrix <-matrix(-20.5, nrow = 400, ncol = 400) #temporary
#output <- paste0(txt_output, targets$farm_id[i], '_bath.txt')
output <- paste0(txt_output, i, '_bath.txt')
write.table(matrix, file=output, sep = " ", row.names=FALSE, col.names=FALSE)}
# for (i in 1:nrow(as.data.frame(targets))){
#   bath_txt(tif_output, i, txt_output)}
bath_txt(tif_output, 54, txt_output)
#resample raster from 115m to 5m (FiCIM) and export as txt file
#https://datacarpentry.org/r-raster-vector-geospatial/03-raster-reproject-in-r/
bath_txt <- function(tif_output, i, txt_output){
bath <- raster(paste0(tif_output, targets$farm_id[i], "_bath.tif"))
bath_2<-projectRaster(bath, crs = crs(bath), res = res(bath)/23)
#writeRaster(s, file = "test.tif", "GTiff", overwrite=TRUE)
matrix <-raster2matrix(bath_2)
matrix <- round(matrix, 0)
dim <- dim(matrix) #automatic matrix triming needs to be added
matrix <- matrix[58:457,1:400] #select center of matrix 400x400
matrix[matrix > 0] <- 0 #remove postive values
matrix[is.na(matrix)] <- 0 #fill empty values
#matrix <-matrix(-20.5, nrow = 400, ncol = 400) #temporary
#output <- paste0(txt_output, targets$farm_id[i], '_bath.txt')
output <- paste0(txt_output, i, '_bath.txt')
write.table(matrix, file=output, sep = " ", row.names=FALSE, col.names=FALSE)}
# for (i in 1:nrow(as.data.frame(targets))){
#   bath_txt(tif_output, i, txt_output)}
bath_txt(tif_output, 54, txt_output)
print(dim)
library(dplyr)
library(plyr)
library(tidyverse)
library(ggplot2)
#download UNFAO data as zipfile and unzip
#url <- "http://www.fao.org/fishery/static/Data/Aquaculture_2018.1.2.zip" #2018 dataset
#url <- "http://www.fao.org/fishery/static/Data/Aquaculture_2019.1.0.zip" #2019 dataset
url <- "http://www.fao.org/fishery/static/Data/Aquaculture_2020.1.0.zip" #2019 dataset
temp <- tempfile()
temp2 <- tempfile()
download.file(url, temp)
unzip(zipfile = temp, exdir = temp2)
#create dataframes from CSVs
aquaculture <- read_csv(file.path(temp2, "TS_FI_AQUACULTURE.csv"))
environment <- read_csv(file.path(temp2, "CL_FI_ENVIRONMENT.csv"))
country <- read_csv(file.path(temp2, "CL_FI_COUNTRY_GROUPS.csv"))
units <- read_csv(file.path(temp2, "CL_FI_UNIT.csv"))
species <- read_csv(file.path(temp2, "CL_FI_SPECIES_GROUPS.csv"))
#select specific columns for certain CSVs
environment <- environment %>%
dplyr::select(Identifier, Name_En)
country <- country %>%
dplyr::select(UN_Code, ISO3_Code, Name_En)
units <- units %>%
dplyr::select(Code, Name_En)
species <- species %>%
dplyr::select("3Alpha_Code", Major_Group, Name_En)
#join tables together to create dataframe that can be filtered by: year (2016), enviornment (Marine), and species group (PISCES)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2017) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2017.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year (2016), enviornment (Marine), and species group (PISCES)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2019) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2017.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year (2016), enviornment (Marine), and species group (PISCES)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2017.csv', row.names=FALSE, col.names = TRUE, sep=",")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
#filter(ENVIRONMENT_NAME == "Marine", GROUP == "PISCES", COUNTRY_NAME == "Greece") %>% #all years
#filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME =="European seabass", COUNTRY_NAME == "Greece") %>% #all years
#filter(ENVIRONMENT_NAME == "Marine", GROUP == "PLANTAE AQUATICAE", YEAR == 2017) %>% #seaweed
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
mutate(TONNES = round(TONNES, 1))
#join tables together to create dataframe that can be filtered by: year (2016), enviornment (Marine), and species group (PISCES)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2018.csv', row.names=FALSE, col.names = TRUE, sep=",")
filter(ENVIRONMENT_NAME == "Marine", GROUP == "PISCES", COUNTRY_NAME == "Greece") %>% #all years
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME =="European seabass", COUNTRY_NAME == "Greece") %>% #all years
filter(ENVIRONMENT_NAME == "Marine", GROUP == "PLANTAE AQUATICAE", YEAR == 2017) %>% #seaweed
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
#export dataframe as csv
#write.table(aquaculture_all, file = '../fao_2018.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2017) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
#write.table(aquaculture_all, file = '../fao_2018.csv', row.names=FALSE, col.names = TRUE, sep=",")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES)), color = "darkred")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES), color = "darkred")
aquaculture_2 <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == c("Gilthead seabream", "European seabass"), COUNTRY_NAME == "Greece")
ggplot(aquaculture_2, aes(x = YEAR, y = TONNES)) +
geom_line(aes(color = SPECIES_NAME)) +
labs(title="Greek Production of European Seabass and Gilthead seabream", x ="year", y="Tonnes") +
scale_fill_discrete(name = "Dose", labels = c("A", "B"))
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
#write.table(aquaculture_all, file = '../fao_2018.csv', row.names=FALSE, col.names = TRUE, sep=",")
aquaculture_bass
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2018.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2020.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2020_all.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2020_2018only.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
write.table(aquaculture_all, file = '../fao_2020_2018only.csv', row.names=FALSE, col.names = TRUE, sep=",")
#join tables together to create dataframe that can be filtered by: year, enviornment, and species group (PISCES=FISH)
aquaculture_all <- aquaculture %>%
left_join(environment, by = c("ENVIRONMENT" = "Identifier")) %>%
left_join(species, by = c("SPECIES"= "3Alpha_Code")) %>%
left_join(country, by = c("COUNTRY" = "UN_Code")) %>%
dplyr::rename("ENVIRONMENT_NAME" = "Name_En.x",
"SPECIES_NAME" = "Name_En.y",
"COUNTRY_NAME" = "Name_En",
"TONNES" = "QUANTITY",
"GROUP" = "Major_Group") %>%
dplyr::select(-ENVIRONMENT, -COUNTRY, -SPECIES, -QUANTITY_UNIT, -QUANTITY_SYMBOL, -VALUE_SYMBOL) %>%
dplyr::select(COUNTRY_NAME, ENVIRONMENT_NAME, GROUP, SPECIES_NAME, TONNES, YEAR) %>%
#filter(YEAR == 2018) %>%
mutate(TONNES = round(TONNES, 1))
aquaculture_all
#export dataframe as csv
#write.table(aquaculture_all, file = '../fao_2020_2018only.csv', row.names=FALSE, col.names = TRUE, sep=",")
aquaculture_bass <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "European seabass", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bass, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
aquaculture_bream <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == "Gilthead seabream", COUNTRY_NAME == "Greece")
ggplot(aquaculture_bream, aes(x=YEAR)) +
geom_line(aes(y = TONNES))#, color = "darkred")
aquaculture_2 <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", SPECIES_NAME == c("Gilthead seabream", "European seabass"), COUNTRY_NAME == "Greece")
ggplot(aquaculture_2, aes(x = YEAR, y = TONNES)) +
geom_line(aes(color = SPECIES_NAME)) +
labs(title="Greek Production of European Seabass and Gilthead seabream", x ="year", y="Tonnes") +
scale_fill_discrete(name = "Dose", labels = c("A", "B"))
aquaculture_greece <- aquaculture_all %>%
filter(ENVIRONMENT_NAME == "Marine", GROUP == "PISCES", COUNTRY_NAME == "Greece")
#ggplot(aquaculture_x, aes(x=YEAR)) +
#  geom_line(aes(y = TONNES), color = "darkred")
ggplot(aquaculture_greece, aes(x = YEAR, y = TONNES)) +
geom_line(aes(color = SPECIES_NAME, linetype = SPECIES_NAME)) #+
#scale_color_manual(values = c("darkred", "steelblue"))
ggplot(aquaculture_x, aes(x=TONNES, y=YEAR))+
geom_line(stat="identity", fill="deepskyblue4")+
#geom_text(aes(label=round(TONNES, 1)))+
coord_flip()
